<h1 align='center'>实验四：实验前必读</h1>

<h5 align='center'> Design by Wanghui-Huang, YXF | Direct by Prof. Feng</h5>

在本次实验（ex4）我们依旧提供了**两个不同的实验供大家选择**。大家可根据自己的情况，选择合适的实验（2选1）完成本次实验。

下面是两个实验的简单说明，供大家正式选择前参考。

## 成绩说明

基于实验环境、选择的实验，各个最高分标准如下。

|                          | 云分布式 | VM虚拟机分布式 | 单机版 |
| :----------------------: | :------: | :------------: | :----: |
| **Ex4_FaceRecognition**  |   100    |       95       |   85   |
| **Ex4_CustomerForecast** |    95    |       90       |   80   |

### 单机版

根据往届经验，**每年都有同学无法完成云服务器分布式**搭建。这除了是因为大家**基础水平**不同的原因，也有一部分原因是因为**云服务器配置太低**的原因。这也是之前建议大家，选择云分布式尽量调高配置的原因（VM虚拟机同理）。

因此，我们**允许同学们使用单机版完成我们本次的实验**。但是我们的代码和教程是基于分布式的，**单机版需要代码和操作需要做些改动**。

- **代码修改**

  1. 引入SQL上下文环境

     在`.py`文件的开头引入

     ```python
     from pyspark.sql import SQLContext 
     sqlContext = SQLContext(sc)
     ```

  2. 路径修改

     由于是单机版，我们文件（如，数据集）的路径需要变为本地路径。

     假设原来的文件路径是：

     ```python
     filePath = "/home/hadoop/EX4/datasets"
     ```

     现在你在路径前加`file://` ，即：

     ```python
     filePath = "file:///home/hadoop/EX4/datasets"
     ```

  未尽之处，你也可以在issue给我们反馈~

- **操作修改**

  在本次实验中，我们默认是向Spark集群提交任务。如果改为单机版，**无需启动集群，hdfs上传数据集等**，直接向master节点提交任务即可。

  你可参考我们的单机版实验`ex2` 中的操作。

### 扩展实验

在ex4实验指导文件中，如`/Ex4_FaceRecognition/ex4.md`，我们都提供了扩展实验。完成本次实验基础的同学都可以完成扩展要求，给予加分鼓励，最高实验成绩叠加到100分。

更具体的说明，你可在本次相应的实验指导文件查看。

## 实验说明

本次实验你可以二选一其中的一个。在你正式开始选择实验前，**请认真阅读每个选择的利弊，酌情选择适合自己的方式**。

|                          |                             优点                             |                             缺点                             |   备注   |
| :----------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :------: |
| **Ex4_FaceRecognition**  |                         1.实验给分高                         | 1.新增实验，issue供参考解决方案不多 <br>2.难度相对较大，适合基础好、动手能力强的同学 | 新增实验 |
| **Ex4_CustomerForecast** | 1.实验难度相对较低 <br>2.issue上各种问题都有完善的解决方案，同时文档本身就已经比较完善 |                      1. 实验给分低一点                       |          |

## 致谢

特别感谢@[2019级--杨旭峰]() 同学，对建设本文档的贡献。

